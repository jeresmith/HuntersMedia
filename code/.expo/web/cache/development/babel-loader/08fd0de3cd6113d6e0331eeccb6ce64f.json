{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport firebase from 'firebase/compat';\n\nrequire('firebase/firestore');\n\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { connect } from 'react-redux';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction Feed(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  useEffect(function () {\n    if (props.usersFollowingLoaded == props.following.length && props.following.length !== 0) {\n      props.feed.sort(function (x, y) {\n        return x.creation - y.creation;\n      });\n      setPosts(props.feed);\n    }\n  }, [props.usersFollowingLoaded, props.feed]);\n\n  var onLikePress = function onLikePress(userId, postId) {\n    firebase.firestore().collection(\"posts\").doc(userId).collection(\"userPosts\").doc(postId).collection(\"likes\").doc(firebase.auth().currentUser.uid).set({});\n  };\n\n  var onDislikePress = function onDislikePress(userId, postId) {\n    firebase.firestore().collection(\"posts\").doc(userId).collection(\"userPosts\").doc(postId).collection(\"likes\").doc(firebase.auth().currentUser.uid).delete();\n  };\n\n  return _jsx(View, {\n    style: styles.container,\n    children: _jsx(View, {\n      style: styles.containerGallery,\n      children: _jsx(FlatList, {\n        numColumns: 1,\n        horizontal: false,\n        data: posts,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _jsxs(View, {\n            style: styles.containerImage,\n            children: [_jsx(Text, {\n              style: styles.container,\n              children: item.user.username\n            }), _jsx(Image, {\n              style: styles.image,\n              source: {\n                uri: item.downloadURL\n              }\n            }), item.currentUserLike ? _jsx(Button, {\n              title: \"Dislike\",\n              onPress: function onPress() {\n                return onDislikePress(item.user.uid, item.id);\n              },\n              color: \"#D2B48C\"\n            }) : _jsx(Button, {\n              title: \"Like\",\n              onPress: function onPress() {\n                return onLikePress(item.user.uid, item.id);\n              },\n              color: \"#D2B48C\"\n            }), _jsx(Text, {\n              onPress: function onPress() {\n                return props.navigation.navigate('Comment', {\n                  postId: item.id,\n                  uid: item.user.uid\n                });\n              },\n              children: \"View comments...\"\n            })]\n          });\n        }\n      })\n    })\n  });\n}\n\nvar styles = StyleSheet.create({\n  topBar: {\n    paddingTop: 50,\n    backgroundColor: '#006400'\n  },\n  row: {\n    flex: 1,\n    flexDirection: 'row',\n    backgroundColor: '#006400'\n  },\n  image: {\n    aspectRatio: 1 / 1,\n    marginBottom: 10,\n    marginStart: 10,\n    height: 70,\n    width: 70\n  },\n  button: {\n    backgroundColor: '#D2B48C',\n    paddingEnd: 10,\n    paddingTop: 50\n  },\n  post: {\n    paddingVertical: 10,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  containerGallery: {\n    flex: 1\n  },\n  image: {\n    flex: 1,\n    aspectRatio: 1 / 1\n  },\n  containerImage: {\n    flex: 1 / 3\n  },\n  container: {\n    flex: 1,\n    paddingTop: 15\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return {\n    currentUser: store.userState.currentUser,\n    following: store.userState.following,\n    feed: store.usersState.feed,\n    usersFollowingLoaded: store.usersState.usersFollowingLoaded\n  };\n};\n\nexport default connect(mapStateToProps, null)(Feed);","map":{"version":3,"sources":["/Users/jeremiah/CS470/HuntersMedia/code/components/main/Feed.js"],"names":["React","useState","useEffect","firebase","require","connect","Feed","props","posts","setPosts","usersFollowingLoaded","following","length","feed","sort","x","y","creation","onLikePress","userId","postId","firestore","collection","doc","auth","currentUser","uid","set","onDislikePress","delete","styles","container","containerGallery","item","containerImage","user","username","image","uri","downloadURL","currentUserLike","id","navigation","navigate","StyleSheet","create","topBar","paddingTop","backgroundColor","row","flex","flexDirection","aspectRatio","marginBottom","marginStart","height","width","button","paddingEnd","post","paddingVertical","justifyContent","alignItems","mapStateToProps","store","userState","usersState"],"mappings":";AAEA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AACAC,OAAO,CAAC,oBAAD,CAAP;;;;;;;;;AAEA,SAAQC,OAAR,QAAsB,aAAtB;;;;AAIA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACjB,kBAA0BN,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAOO,KAAP;AAAA,MAAcC,QAAd;;AAGAP,EAAAA,SAAS,CAAC,YAAM;AACd,QAAGK,KAAK,CAACG,oBAAN,IAA8BH,KAAK,CAACI,SAAN,CAAgBC,MAA9C,IAAwDL,KAAK,CAACI,SAAN,CAAgBC,MAAhB,KAA2B,CAAtF,EAAwF;AACtFL,MAAAA,KAAK,CAACM,IAAN,CAAWC,IAAX,CAAgB,UAASC,CAAT,EAAWC,CAAX,EAAc;AAC5B,eAAOD,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAtB;AACD,OAFD;AAGAR,MAAAA,QAAQ,CAACF,KAAK,CAACM,IAAP,CAAR;AACD;AAEF,GARQ,EAQN,CAACN,KAAK,CAACG,oBAAP,EAA6BH,KAAK,CAACM,IAAnC,CARM,CAAT;;AAUA,MAAMK,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,MAAT,EAAoB;AACtCjB,IAAAA,QAAQ,CAACkB,SAAT,GACGC,UADH,CACc,OADd,EAEGC,GAFH,CAEOJ,MAFP,EAGGG,UAHH,CAGc,WAHd,EAIGC,GAJH,CAIOH,MAJP,EAKGE,UALH,CAKc,OALd,EAMGC,GANH,CAMOpB,QAAQ,CAACqB,IAAT,GAAgBC,WAAhB,CAA4BC,GANnC,EAOGC,GAPH,CAOO,EAPP;AAQD,GATD;;AAUA,MAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACT,MAAD,EAASC,MAAT,EAAoB;AACzCjB,IAAAA,QAAQ,CAACkB,SAAT,GACGC,UADH,CACc,OADd,EAEGC,GAFH,CAEOJ,MAFP,EAGGG,UAHH,CAGc,WAHd,EAIGC,GAJH,CAIOH,MAJP,EAKGE,UALH,CAKc,OALd,EAMGC,GANH,CAMOpB,QAAQ,CAACqB,IAAT,GAAgBC,WAAhB,CAA4BC,GANnC,EAOGG,MAPH;AAQD,GATD;;AAUA,SACE,KAAC,IAAD;AAAM,IAAA,KAAK,EAAEC,MAAM,CAACC,SAApB;AAAA,cACI,KAAC,IAAD;AAAM,MAAA,KAAK,EAAED,MAAM,CAACE,gBAApB;AAAA,gBACI,KAAC,QAAD;AACI,QAAA,UAAU,EAAE,CADhB;AAEI,QAAA,UAAU,EAAE,KAFhB;AAGI,QAAA,IAAI,EAAExB,KAHV;AAII,QAAA,UAAU,EAAE;AAAA,cAAEyB,IAAF,QAAEA,IAAF;AAAA,iBAER,MAAC,IAAD;AAAM,YAAA,KAAK,EAAEH,MAAM,CAACI,cAApB;AAAA,uBACI,KAAC,IAAD;AAAM,cAAA,KAAK,EAAEJ,MAAM,CAACC,SAApB;AAAA,wBAAgCE,IAAI,CAACE,IAAL,CAAUC;AAA1C,cADJ,EAEI,KAAC,KAAD;AACE,cAAA,KAAK,EAAEN,MAAM,CAACO,KADhB;AAEE,cAAA,MAAM,EAAE;AAACC,gBAAAA,GAAG,EAAEL,IAAI,CAACM;AAAX;AAFV,cAFJ,EAMKN,IAAI,CAACO,eAAL,GAEK,KAAC,MAAD;AACE,cAAA,KAAK,EAAC,SADR;AAEE,cAAA,OAAO,EAAE;AAAA,uBAAMZ,cAAc,CAACK,IAAI,CAACE,IAAL,CAAUT,GAAX,EAAgBO,IAAI,CAACQ,EAArB,CAApB;AAAA,eAFX;AAGE,cAAA,KAAK,EAAC;AAHR,cAFL,GAWK,KAAC,MAAD;AACE,cAAA,KAAK,EAAC,MADR;AAEE,cAAA,OAAO,EAAE;AAAA,uBAAMvB,WAAW,CAACe,IAAI,CAACE,IAAL,CAAUT,GAAX,EAAgBO,IAAI,CAACQ,EAArB,CAAjB;AAAA,eAFX;AAGE,cAAA,KAAK,EAAC;AAHR,cAjBV,EAwBI,KAAC,IAAD;AACA,cAAA,OAAO,EAAE;AAAA,uBACPlC,KAAK,CAACmC,UAAN,CAAiBC,QAAjB,CAA0B,SAA1B,EAAqC;AAAGvB,kBAAAA,MAAM,EAAEa,IAAI,CAACQ,EAAhB;AAAoBf,kBAAAA,GAAG,EAAEO,IAAI,CAACE,IAAL,CAAUT;AAAnC,iBAArC,CADO;AAAA,eADT;AAAA;AAAA,cAxBJ;AAAA,YAFQ;AAAA;AAJhB;AADJ;AADJ,IADF;AA8CH;;AAED,IAAMI,MAAM,GAAGc,UAAU,CAACC,MAAX,CAAkB;AAC7BC,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAE,EADN;AAENC,IAAAA,eAAe,EAAE;AAFX,GADqB;AAK7BC,EAAAA,GAAG,EAAE;AACHC,IAAAA,IAAI,EAAE,CADH;AAEHC,IAAAA,aAAa,EAAE,KAFZ;AAGHH,IAAAA,eAAe,EAAE;AAHd,GALwB;AAU7BX,EAAAA,KAAK,EAAE;AACHe,IAAAA,WAAW,EAAE,IAAE,CADZ;AAEHC,IAAAA,YAAY,EAAE,EAFX;AAGHC,IAAAA,WAAW,EAAE,EAHV;AAIHC,IAAAA,MAAM,EAAE,EAJL;AAKHC,IAAAA,KAAK,EAAE;AALJ,GAVsB;AAiB7BC,EAAAA,MAAM,EAAE;AACNT,IAAAA,eAAe,EAAE,SADX;AAENU,IAAAA,UAAU,EAAE,EAFN;AAGNX,IAAAA,UAAU,EAAE;AAHN,GAjBqB;AAsB7BY,EAAAA,IAAI,EAAE;AACJC,IAAAA,eAAe,EAAE,EADb;AAEJC,IAAAA,cAAc,EAAE,QAFZ;AAGJC,IAAAA,UAAU,EAAE;AAHR,GAtBuB;AA2B7B9B,EAAAA,gBAAgB,EAAE;AAChBkB,IAAAA,IAAI,EAAE;AADU,GA3BW;AA8B7Bb,EAAAA,KAAK,EAAE;AACLa,IAAAA,IAAI,EAAE,CADD;AAELE,IAAAA,WAAW,EAAE,IAAE;AAFV,GA9BsB;AAkC7BlB,EAAAA,cAAc,EAAC;AACbgB,IAAAA,IAAI,EAAE,IAAE;AADK,GAlCc;AAqC7BnB,EAAAA,SAAS,EAAE;AACTmB,IAAAA,IAAI,EAAE,CADG;AAETH,IAAAA,UAAU,EAAE;AAFH;AArCkB,CAAlB,CAAf;;AA4CA,IAAMgB,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SAAY;AAClCvC,IAAAA,WAAW,EAAEuC,KAAK,CAACC,SAAN,CAAgBxC,WADK;AAElCd,IAAAA,SAAS,EAAEqD,KAAK,CAACC,SAAN,CAAgBtD,SAFO;AAGlCE,IAAAA,IAAI,EAAEmD,KAAK,CAACE,UAAN,CAAiBrD,IAHW;AAIlCH,IAAAA,oBAAoB,EAAEsD,KAAK,CAACE,UAAN,CAAiBxD;AAJL,GAAZ;AAAA,CAAxB;;AASA,eAAeL,OAAO,CAAC0D,eAAD,EAAkB,IAAlB,CAAP,CAA+BzD,IAA/B,CAAf","sourcesContent":["//import {View, Text, Button, ScrollView, Image, StyleSheet} from 'react-native';\n\nimport React, { useState, useEffect } from 'react'\nimport firebase from 'firebase/compat'\nrequire('firebase/firestore')\nimport {StyleSheet, View, Text, Image, FlatList, Button, ScrollView} from 'react-native';\nimport {connect} from 'react-redux'\n\n\n\nfunction Feed(props) {\n    const [posts, setPosts] = useState([]); \n    \n\n    useEffect(() => {\n      if(props.usersFollowingLoaded == props.following.length && props.following.length !== 0){\n        props.feed.sort(function(x,y) {\n          return x.creation - y.creation;\n        })\n        setPosts(props.feed);\n      }\n        \n    }, [props.usersFollowingLoaded, props.feed])\n    \n    const onLikePress = (userId, postId) => {\n      firebase.firestore()\n        .collection(\"posts\")\n        .doc(userId)\n        .collection(\"userPosts\")\n        .doc(postId) \n        .collection(\"likes\")\n        .doc(firebase.auth().currentUser.uid)\n        .set({})\n    }\n    const onDislikePress = (userId, postId) => {\n      firebase.firestore()\n        .collection(\"posts\")\n        .doc(userId)\n        .collection(\"userPosts\")\n        .doc(postId) \n        .collection(\"likes\")\n        .doc(firebase.auth().currentUser.uid)\n        .delete()\n    }\n    return (\n      <View style={styles.container}>\n          <View style={styles.containerGallery}>\n              <FlatList\n                  numColumns={1}\n                  horizontal={false}\n                  data={posts}\n                  renderItem={({item}) => \n                  (\n                      <View style={styles.containerImage}>\n                          <Text style={styles.container}>{item.user.username}</Text>\n                          <Image\n                            style={styles.image}\n                            source={{uri: item.downloadURL}}\n                          />\n                          {item.currentUserLike ? \n                              (\n                                <Button \n                                  title=\"Dislike\"\n                                  onPress={() => onDislikePress(item.user.uid, item.id)}\n                                  color='#D2B48C'\n                                /> \n                                \n                              )  \n                              :\n                              (\n                                <Button \n                                  title=\"Like\"\n                                  onPress={() => onLikePress(item.user.uid, item.id)}\n                                  color='#D2B48C'\n                                /> \n                              ) \n                        }\n                          <Text \n                          onPress={() => \n                            props.navigation.navigate('Comment', {  postId: item.id, uid: item.user.uid })}>\n                            View comments...\n                            </Text>\n                      </View>\n                  )}\n              />\n          </View> \n      </View>\n         \n      \n    )\n}\n\nconst styles = StyleSheet.create({\n    topBar: {\n      paddingTop: 50,\n      backgroundColor: '#006400'\n    },\n    row: {\n      flex: 1,\n      flexDirection: 'row',\n      backgroundColor: '#006400',\n    },\n    image: {\n        aspectRatio: 1/1,\n        marginBottom: 10,\n        marginStart: 10,\n        height: 70,\n        width: 70\n    },\n    button: {\n      backgroundColor: '#D2B48C',\n      paddingEnd: 10,\n      paddingTop: 50\n    },\n    post: {\n      paddingVertical: 10,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    containerGallery: {\n      flex: 1\n    },\n    image: {\n      flex: 1,\n      aspectRatio: 1/1\n    },\n    containerImage:{\n      flex: 1/3\n    },\n    container: {\n      flex: 1,\n      paddingTop: 15,\n    }\n\n})\n\nconst mapStateToProps = (store) => ({\n  currentUser: store.userState.currentUser,\n  following: store.userState.following,\n  feed: store.usersState.feed,\n  usersFollowingLoaded: store.usersState.usersFollowingLoaded,\n\n})\n\n\nexport default connect(mapStateToProps, null)(Feed);"]},"metadata":{},"sourceType":"module"}